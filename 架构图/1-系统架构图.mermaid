graph TB
    %% 启动层
    subgraph startup_layer [启动层]
        MAIN[main.py<br/>游戏启动器]
        LAUNCHER[GameLauncher<br/>图形启动器]
        SETUP[PlayerSetupDialog<br/>玩家设置对话框]
    end

    %% UI层
    subgraph ui_layer [用户界面层]
        UI[MainWindow<br/>主游戏窗口]
        WIDGETS[game_widgets.py<br/>游戏组件]
        BOARD_UI[棋盘显示组件]
        CONTROL_UI[控制面板]
        INFO_UI[玩家信息面板]
    end

    %% 游戏引擎层
    subgraph engine_layer [游戏引擎层]
        ENGINE[GameEngine<br/>游戏引擎]
        PHASES[游戏阶段管理<br/>GamePhase/TurnPhase]
        LOGIC[游戏逻辑控制]
    end

    %% 游戏对象层
    subgraph object_layer [游戏对象层]
        BOARD[GameBoard<br/>游戏棋盘]
        SQUARES[Squares<br/>格子系统]
        PLAYER[Player<br/>玩家系统]
        CARDS[Cards<br/>卡片系统]
    end

    %% 格子类型
    subgraph square_types [格子类型]
        SQ1[PaycheckSquare<br/>发薪水格子]
        SQ2[OpportunitySquare<br/>机会格子]
        SQ3[MarketSquare<br/>市场格子]
        SQ4[DoodadSquare<br/>意外支出格子]
        SQ5[CharitySquare<br/>慈善格子]
        SQ6[DownsizedSquare<br/>裁员格子]
        SQ7[BabySquare<br/>生孩子格子]
    end

    %% 卡片类型
    subgraph card_system [卡片系统]
        CARD_MGR[CardManager<br/>卡片管理器]
        ENT_CARD[EnterpriseCard<br/>企业卡]
        OPP_CARD[OpportunityCard<br/>机会卡]
        FIN_CARD[FinancialCard<br/>金融卡]
        SIDE_CARD[SideBusinessCard<br/>副业卡]
    end

    %% 数据层
    subgraph data_layer [数据层]
        PROF_DATA[professions.json<br/>职业数据]
        CARD_DATA[cards.json<br/>卡片数据]
    end

    %% 未来扩展
    subgraph future_layer [未来扩展]
        MOBILE[MobileClientInterface<br/>手机客户端接口]
    end

    %% 连接关系
    MAIN --> LAUNCHER
    LAUNCHER --> SETUP
    LAUNCHER --> UI
    
    UI --> ENGINE
    UI --> BOARD_UI
    UI --> CONTROL_UI
    UI --> INFO_UI
    
    ENGINE --> BOARD
    ENGINE --> PLAYER
    ENGINE --> CARDS
    ENGINE --> PHASES
    
    BOARD --> SQUARES
    SQUARES --> SQ1
    SQUARES --> SQ2
    SQUARES --> SQ3
    SQUARES --> SQ4
    SQUARES --> SQ5
    SQUARES --> SQ6
    SQUARES --> SQ7
    
    CARDS --> CARD_MGR
    CARD_MGR --> ENT_CARD
    CARD_MGR --> OPP_CARD
    CARD_MGR --> FIN_CARD
    CARD_MGR --> SIDE_CARD
    
    LAUNCHER --> PROF_DATA
    CARD_MGR --> CARD_DATA
    
    ENGINE --> MOBILE

    %% 样式
    classDef startLayer fill:#e1f5fe
    classDef uiLayer fill:#f3e5f5
    classDef engineLayer fill:#e8f5e8
    classDef objectLayer fill:#fff3e0
    classDef dataLayer fill:#fce4ec
    classDef futureLayer fill:#f1f8e9

    class MAIN,LAUNCHER,SETUP startLayer
    class UI,WIDGETS,BOARD_UI,CONTROL_UI,INFO_UI uiLayer
    class ENGINE,PHASES,LOGIC engineLayer
    class BOARD,SQUARES,PLAYER,CARDS,SQ1,SQ2,SQ3,SQ4,SQ5,SQ6,SQ7,CARD_MGR,ENT_CARD,OPP_CARD,FIN_CARD,SIDE_CARD objectLayer
    class PROF_DATA,CARD_DATA dataLayer
    class MOBILE futureLayer 